<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Administrador</title>
    </h:head>
    <h:body>
        <h1 align="center">Administrador</h1>
        <br></br>
        <br></br>
        <div align="center">
            <h:panelGrid columns="2">
                <p:commandButton id="agregarL" disabled="#{frmLibros.rDisable() == 0}" value="Agregar Libro" icon="fa fa-book" action="#{frmLibros.setDisable(0)}" process="agregarL" update="create:id create:isbn create:titulo create:editorial create:pais create:autor agregarL eliminarL create:agregar create:eliminar"/>
                <p:commandButton id="eliminarL" disabled="#{frmLibros.rDisable() == 1}" value="Eliminar Libro" icon="fa fa-eraser" action="#{frmLibros.setDisable(1)}" process="eliminarL" update="create:id create:isbn create:titulo create:editorial create:pais create:autor agregarL eliminarL create:agregar create:eliminar"/>
            </h:panelGrid>
            <h:form id="create">
                <h:panelGrid columns="2">
                    <p:outputLabel for="id" value="Id Libro"/>
                    <p:inputText id="id" disabled="#{frmLibros.rDisable() == 0}" value="#{frmLibros.id}"/>
                    <p:outputLabel for="isbn" value="Isbn"/>
                    <p:inputText id="isbn" disabled="#{frmLibros.rDisable() == 1}" value="#{frmLibros.isbn}"/>
                    <p:outputLabel for="titulo" value="Titulo"/>
                    <p:inputText id="titulo" disabled="#{frmLibros.rDisable() == 1}" value="#{frmLibros.titulo}"/>
                    <p:outputLabel for="editorial" value="Editorial"/>
                    <p:selectOneMenu id="editorial" disabled="#{frmLibros.rDisable() == 1}" value="#{frmLibros.editorial}">
                        <f:selectItems value="#{frmLibros.generarlistaEditoriales()}"/>
                    </p:selectOneMenu>
                    <p:outputLabel for="pais" value="Pais"/>
                    <p:selectOneMenu id="pais" disabled="#{frmLibros.rDisable() == 1}" value="#{frmLibros.pais}">
                        <f:selectItems value="#{frmLibros.generarlistaPaises()}"/>
                    </p:selectOneMenu>
                    <p:outputLabel for="autor" value="Autor"/>
                    <p:selectOneMenu id="autor" disabled="#{frmLibros.rDisable() == 1}" value="#{frmLibros.autor}">
                        <f:selectItems value="#{frmLibros.generarlistaAutores()}"/>
                    </p:selectOneMenu>
                    <p:commandButton disabled="#{frmLibros.rDisable() == 1}" id="agregar" value="Agregar" icon="fa fa-plus" actionListener="#{frmLibros.agregar()}" onclick="PF('wdialogALibro').show();"/>
                    <p:commandButton disabled="#{frmLibros.rDisable() == 0}" id="eliminar" value="Eliminar" icon="fa fa-minus" actionListener="#{frmLibros.eliminar()}" onclick="PF('wdialogELibro').show();"/>
                </h:panelGrid>
            </h:form>
        </div>
        <p:dialog id="dialogALibro" widgetVar="wdialogALibro" header="Libro Agregado" closable="false" draggable="false" resizable="false" modal="true" appendTo="@(body)">
            <div align="center">
                <h:form>
                    <h:panelGrid columns="2">
                        <p:outputLabel value="Id asignado: "/>
                        <p:outputLabel value="#{frmLibros.rIdLibro()}"/>
                    </h:panelGrid>
                    <h:panelGrid>
                        <p:commandButton value="Ok" icon="fa fa-check-circle" action="administrador.jsf?faces-redirect=true"/>
                    </h:panelGrid>
                </h:form>
            </div>
        </p:dialog>
        <p:dialog id="dialogELibro" widgetVar="wdialogELibro" header="Accion exitosa" closable="false" draggable="false" resizable="false" modal="true" appendTo="@(body)">
            <div align="center">
                <h:form>
                    <h:panelGrid>
                        <h4>Libro Eliminado</h4>
                        <p:commandButton value="Ok" icon="fa fa-check-circle" action="administrador.jsf?faces-redirect=true"/>
                    </h:panelGrid>
                </h:form>
            </div>
        </p:dialog>
        <br></br>
        <br></br>
        <div align="center">
            <h:form id="createE">
                <p:fieldset>
                    <h:panelGrid>
                        <p:commandButton id="agregarEditorial" disabled="#{frmLibros.rDisableE() == 1}" value="Agregar Editorial" icon="fa fa-university" action="#{frmLibros.setDisableE(1)}" process="agregarEditorial" update="createE:nombreEditorial createE:agregarEditorial createE:agregarE"/>
                    </h:panelGrid>
                    <h:panelGrid columns="2">
                        <p:outputLabel for="nombreEditorial" value="Editorial"/>
                        <p:inputText id="nombreEditorial" disabled="#{frmLibros.rDisableE() == 0}" value="#{frmLibros.nombreEditorial}"/>
                        <p:commandButton disabled="#{frmLibros.rDisableE() == 0}" id="agregarE" value="Agregar" icon="fa fa-plus" actionListener="#{frmLibros.agregarEditorial()}" onclick="PF('wdialogEditorial').show();"/>
                    </h:panelGrid>
                </p:fieldset>
            </h:form>
        </div>
        <p:dialog id="dialogEditorial" widgetVar="wdialogEditorial" header="Accion exitosa" closable="false" draggable="false" resizable="false" modal="true" appendTo="@(body)">
            <div align="center">
                <h:form>
                    <h:panelGrid>
                        <h4>Editorial Agregada</h4>
                        <p:commandButton value="Ok" icon="fa fa-check-circle" action="administrador.jsf?faces-redirect=true"/>
                    </h:panelGrid>
                </h:form>
            </div>
        </p:dialog>
        <br></br>
        <br></br>
        <div align="center">
            <h:form id="createP">
                <p:fieldset>
                    <h:panelGrid>
                        <p:commandButton id="agregarPais" disabled="#{frmLibros.rDisableP() == 1}" value="Agregar Pais" icon="fa fa-flag" action="#{frmLibros.setDisableP(1)}" process="agregarPais" update="createP:nombrePais createP:agregarPais createP:agregarP"/>
                    </h:panelGrid>
                    <h:panelGrid columns="2">
                        <p:outputLabel for="nombrePais" value="Pais"/>
                        <p:inputText id="nombrePais" disabled="#{frmLibros.rDisableP() == 0}" value="#{frmLibros.nombrePais}" />
                        <p:commandButton disabled="#{frmLibros.rDisableP() == 0}" id="agregarP" value="Agregar" icon="fa fa-plus" actionListener="#{frmLibros.agregarPais()}" onclick="PF('wdialogPais').show();"/>
                    </h:panelGrid>
                </p:fieldset>
            </h:form>
        </div>
        <p:dialog id="dialogPais" widgetVar="wdialogPais" header="Accion exitosa" closable="false" draggable="false" resizable="false" modal="true" appendTo="@(body)">
            <div align="center">
                <h:form>
                    <h:panelGrid>
                        <h4>Pais Agregado</h4>
                        <p:commandButton value="Ok" icon="fa fa-check-circle" action="administrador.jsf?faces-redirect=true"/>
                    </h:panelGrid>
                </h:form>
            </div>
        </p:dialog>
        <br></br>
        <br></br>
        <div align="center">
            <h:form id="createA">
                <p:fieldset>
                    <h:panelGrid>
                        <p:commandButton id="agregarAutor" disabled="#{frmLibros.rDisableA() == 1}" value="Agregar Autor" icon="fa fa-user-plus" action="#{frmLibros.setDisableA(1)}" process="agregarAutor" update="createA:nombreAutor createA:agregarAutor createA:agregarA"/>
                    </h:panelGrid>
                    <h:panelGrid columns="2">
                        <p:outputLabel for="nombreAutor" value="Autor"/>
                        <p:inputText id="nombreAutor" disabled="#{frmLibros.rDisableA() == 0}" value="#{frmLibros.nombreAutor}"/>
                        <p:commandButton disabled="#{frmLibros.rDisableA() == 0}" id="agregarA" value="Agregar" icon="fa fa-plus" actionListener="#{frmLibros.agregarAutor()}" onclick="PF('wdialogAutor').show();"/>
                    </h:panelGrid>
                </p:fieldset>
            </h:form>
        </div>
        <p:dialog id="dialogAutor" widgetVar="wdialogAutor" header="Accion exitosa" closable="false" draggable="false" resizable="false" modal="true" appendTo="@(body)">
            <div align="center">
                <h:form>
                    <h:panelGrid>
                        <h4>Autor Agregado</h4>
                        <p:commandButton value="Ok" icon="fa fa-check-circle" action="administrador.jsf?faces-redirect=true"/>
                    </h:panelGrid>
                </h:form>
            </div>
        </p:dialog>
        <br></br>
        <br></br>
        <div align="center">
            <h:form>
                <p:fieldset legend="Libros">
                    <p:dataTable paginator="true" rows="5" value="#{frmLibros.todo1()}" var="l">
                        <p:column headerText="Id" filterBy="#{l.librosIdLibro.idLibro}" filterMatchMode="contains">
                            <h:outputText value="#{l.librosIdLibro.idLibro}"/>
                        </p:column>
                        <p:column headerText="ISBN" filterBy="#{l.librosIdLibro.isbn}" filterMatchMode="contains">
                            <h:outputText value="#{l.librosIdLibro.isbn}"/>
                        </p:column>
                        <p:column headerText="Titulo" filterBy="#{l.librosIdLibro.titulo}" filterMatchMode="contains">
                            <h:outputText value="#{l.librosIdLibro.titulo}"/>
                        </p:column>>
                        <p:column headerText="Editorial" filterBy="#{l.librosIdLibro.editorialesIdEditorial.editorial}" filterMatchMode="contains">
                            <h:outputText value="#{l.librosIdLibro.editorialesIdEditorial.editorial}"/>
                        </p:column>
                        <p:column headerText="Pais" filterBy="#{l.librosIdLibro.paisesIdPais.pais}" filterMatchMode="contains">
                            <h:outputText value="#{l.librosIdLibro.paisesIdPais.pais}"/>
                        </p:column>
                        <p:column headerText="Autor" filterBy="#{l.autoresIdAutor.autor}" filterMatchMode="contains">
                            <h:outputText value="#{l.autoresIdAutor.autor}"/>
                        </p:column>
                    </p:dataTable>
                </p:fieldset>
            </h:form>
        </div>
        <br></br>
        <br></br>
        <div align="center">
            <h:form>
                <p:fieldset legend="Prestamos">
                    <p:dataTable paginator="true" rows="5" value="#{frmLibros.todo5()}" var="p">
                        <p:column headerText="Id Prestamo" filterBy="#{p.idPrestamo}" filterMatchMode="contains">
                            <h:outputText value="#{p.idPrestamo}"/>
                        </p:column>
                        <p:column headerText="Id Usuario" filterBy="#{p.usuariosIdUsuario.idUsuario}" filterMatchMode="contains">
                            <h:outputText value="#{p.usuariosIdUsuario.idUsuario}"/>
                        </p:column>
                        <p:column headerText="Id Libro" filterBy="#{p.librosExistenciasIdExistencia.librosIdLibro.idLibro}" filterMatchMode="contains">
                            <h:outputText value="#{p.librosExistenciasIdExistencia.librosIdLibro.idLibro}"/>
                        </p:column>>
                        <p:column headerText="Fecha del prestamo" filterBy="#{p.fechaPrestamo.year + 1900}-#{p.fechaPrestamo.month + 1}-#{p.fechaPrestamo.date} || #{p.fechaPrestamo}" filterMatchMode="contains">
                            <h:outputText value="#{p.fechaPrestamo.year + 1900}-#{p.fechaPrestamo.month + 1}-#{p.fechaPrestamo.date}"/>
                        </p:column>
                        <p:column headerText="Fecha de devolucion" filterBy="#{p.fechaDevolución.year + 1900}-#{p.fechaDevolución.month + 1}-#{p.fechaDevolución.date} || #{p.fechaDevolución}" filterMatchMode="contains">
                            <h:outputText value="#{p.fechaDevolución.year + 1900}-#{p.fechaDevolución.month + 1}-#{p.fechaDevolución.date}"/>
                        </p:column>
                    </p:dataTable>
                </p:fieldset>
            </h:form>
        </div>
        <br></br>
        <br></br>
        <div align="center">
            <h:form>
                <p:fieldset legend="Usuarios">
                    <p:dataTable paginator="true" rows="5" value="#{frmLibros.todo6()}" var="u">
                        <p:column headerText="Id" filterBy="#{u.idUsuario}" filterMatchMode="contains">
                            <h:outputText value="#{u.idUsuario}"/>
                        </p:column>
                        <p:column headerText="Nombre" filterBy="#{u.nombre}" filterMatchMode="contains">
                            <h:outputText value="#{u.nombre}"/>
                        </p:column>
                        <p:column headerText="Apellido" filterBy="#{u.apellido}" filterMatchMode="contains">
                            <h:outputText value="#{u.apellido}"/>
                        </p:column>>
                        <p:column headerText="Telefono" filterBy="#{u.teléfono}" filterMatchMode="contains">
                            <h:outputText value="#{u.teléfono}"/>
                        </p:column>
                        <p:column headerText="Direccion" filterBy="#{u.dirección}" filterMatchMode="contains">
                            <h:outputText value="#{u.dirección}"/>
                        </p:column>
                        <p:column headerText="Identificacion" filterBy="#{u.dui}" filterMatchMode="contains">
                            <h:outputText value="#{u.dui}"/>
                        </p:column>
                    </p:dataTable>
                </p:fieldset>
            </h:form>
        </div>
        <br></br>
        <br></br>
        <div align="center">
            <h:form>
                <h:panelGrid>
                    <p:commandButton value="Inicio" icon="fa fa-arrow-circle-left" action="inicio.jsf?faces-redirect=true"/>
                </h:panelGrid>
            </h:form>
        </div>
    </h:body>
</html>

